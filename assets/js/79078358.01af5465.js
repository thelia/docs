"use strict";(globalThis.webpackChunkthelia=globalThis.webpackChunkthelia||[]).push([[6036],{7582:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>a,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"smarty_plugins/{postage}","title":"{postage}","description":"The postage Smarty block retrieves the postage amount of the current cart if it exists.","source":"@site/docs/smarty_plugins/{postage}.md","sourceDirName":"smarty_plugins","slug":"/smarty_plugins/{postage}","permalink":"/docs/docs/smarty_plugins/{postage}","draft":false,"unlisted":false,"editUrl":"https://github.com/thelia/docs/edit/main/docs/smarty_plugins/{postage}.md","tags":[],"version":"current","frontMatter":{},"sidebar":"myAutogeneratedSidebar","previous":{"title":"{navigate}","permalink":"/docs/docs/smarty_plugins/{navigate}"},"next":{"title":"{set_previous_url}","permalink":"/docs/docs/smarty_plugins/{set_previous_url}"}}');var i=n(4848),l=n(8453);const o={},r=void 0,a={},c=[{value:"Outputs",id:"outputs",level:2},{value:"An implementation for the default front office template",id:"an-implementation-for-the-default-front-office-template",level:2}];function d(t){const e={code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,l.R)(),...t.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.p,{children:"The postage Smarty block retrieves the postage amount of the current cart if it exists."}),"\n",(0,i.jsx)(e.p,{children:"The delivery country is choosen with the first available value :"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"Either the country of the delivery address of the customer related to the cart if it exists"}),"\n",(0,i.jsx)(e.li,{children:"Or the country saved in cookie if customer have changed the default country"}),"\n",(0,i.jsx)(e.li,{children:"Or the default country for the shop if it exists"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"The function select the cheapest delivery for this country."}),"\n",(0,i.jsx)(e.h2,{id:"outputs",children:"Outputs"}),"\n",(0,i.jsx)(e.p,{children:"Inside the postage block these variables are defined :"}),"\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{style:{textAlign:"left"},children:"Parameter name"}),(0,i.jsx)(e.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{style:{textAlign:"left"},children:(0,i.jsx)(e.code,{children:"$country_id"})}),(0,i.jsxs)(e.td,{style:{textAlign:"left"},children:["The country id or ",(0,i.jsx)(e.code,{children:"null"})]})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{style:{textAlign:"left"},children:(0,i.jsx)(e.code,{children:"$delivery_id"})}),(0,i.jsxs)(e.td,{style:{textAlign:"left"},children:["The delivery id or ",(0,i.jsx)(e.code,{children:"null"})]})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{style:{textAlign:"left"},children:(0,i.jsx)(e.code,{children:"$postage"})}),(0,i.jsxs)(e.td,{style:{textAlign:"left"},children:["The postage amount or ",(0,i.jsx)(e.code,{children:"0.0"})]})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{style:{textAlign:"left"},children:(0,i.jsx)(e.code,{children:"$is_customizable"})}),(0,i.jsx)(e.td,{style:{textAlign:"left"},children:"Indicate if the postage can be customized. False When customer is signed and have a valid delivery address"})]})]})]}),"\n",(0,i.jsx)(e.h2,{id:"an-implementation-for-the-default-front-office-template",children:"An implementation for the default front office template"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-smarty",children:'    <tbody>\n        {postage}\n            {assign var="postageAmount" value=$postage }\n            <tr>\n                <td class="product" colspan="2">\n                    <form action="{url path="/cart/country"}" class="form-inline" method="post">\n                        <h3>\n                            {intl l="Estimated shipping "}\n                            {if $is_customizable == false}\n                                {loop type="country" name="countryLoop" id="$country_id"}\n                                {intl l="for"} {$TITLE}\n                                {/loop}\n                            {/if}\n                        </h3>\n                        {if $is_customizable}\n                        <div>\n                            <label for="cart-country">{intl l="Select your country:"}</label>\n                            <select id="cart-country" name="country">\n                            {loop type="country" name="countryLoop" with_area="true"}\n                                <option value="{$ID}" {if $ID == $country_id }selected="selected" {/if}>{$TITLE}</option>\n                            {/loop}\n                            </select>\n                            <a class="btn btn-change-country" href="#"><i class="icon-refresh"></i> {intl l="update"}</a>\n                        </div>\n                        {/if}\n                        {if $delivery_id != 0 }\n                        <div>\n                            {intl l="with:"} {loop type="delivery" name="deliveryLoop" id=$delivery_id}{$TITLE} {/loop}\n                        </div>\n                        {else}\n                        <div class="alert alert-danger">\n                            {intl l="No deliveries available for this cart and this country"}\n                        </div>\n                        {/if}\n                    </form>\n                </td>\n                <td class="unitprice">{$postage} {currency attr="symbol"}</td>\n                <td class="qty">-</td>\n                <td class="subprice">{$postage} {currency attr="symbol"}</td>\n            </tr>\n        {/postage}\n    </tbody>\n    <tfoot>\n        <tr>\n            <td colspan="3" class="empty">&nbsp;</td>\n            <th class="total">{intl l="Total"}</th>\n            <td class="total">\n                <div class="total-price">\n                    {assign var="totalAmount" value={cart attr=\'total_taxed_price_without_discount\'} + $postageAmount }\n                    <span class="price">{$totalAmount} {currency attr="symbol"}</span>\n                </div>\n            </td>\n        </tr>\n    </tfoot>\n'})})]})}function h(t={}){const{wrapper:e}={...(0,l.R)(),...t.components};return e?(0,i.jsx)(e,{...t,children:(0,i.jsx)(d,{...t})}):d(t)}},8453:(t,e,n)=>{n.d(e,{R:()=>o,x:()=>r});var s=n(6540);const i={},l=s.createContext(i);function o(t){const e=s.useContext(l);return s.useMemo(function(){return"function"==typeof t?t(e):{...e,...t}},[e,t])}function r(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(i):t.components||i:o(t.components),s.createElement(l.Provider,{value:e},t.children)}}}]);