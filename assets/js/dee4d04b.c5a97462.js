"use strict";(globalThis.webpackChunkthelia=globalThis.webpackChunkthelia||[]).push([[4843],{8453:(e,t,s)=>{s.d(t,{R:()=>o,x:()=>l});var n=s(6540);const i={},r=n.createContext(i);function o(e){const t=n.useContext(r);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),n.createElement(r.Provider,{value:t},e.children)}},9305:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>d,frontMatter:()=>o,metadata:()=>n,toc:()=>a});const n=JSON.parse('{"id":"loops/AuthentificationChecker","title":"Authentification checker","description":"The Auth loop perform authorisation checks against the current user. This loop returns nothing if the authorization fails, or the loop contents if it succeeds.","source":"@site/docs/loops/AuthentificationChecker.md","sourceDirName":"loops","slug":"/loops/AuthentificationChecker","permalink":"/docs/loops/AuthentificationChecker","draft":false,"unlisted":false,"editUrl":"https://github.com/thelia/docs/edit/main/docs/loops/AuthentificationChecker.md","tags":[],"version":"current","frontMatter":{"title":"Authentification checker"},"sidebar":"myAutogeneratedSidebar","previous":{"title":"Attribute combination","permalink":"/docs/loops/AttributeCombination"},"next":{"title":"Base Specific Module","permalink":"/docs/loops/BaseSpecificModule"}}');var i=s(4848),r=s(8453);const o={title:"Authentification checker"},l=void 0,c={},a=[{value:"Arguments",id:"auth-arguments",level:2},{value:"Examples",id:"examples",level:2},{value:"Access possible values",id:"auth-access-possible-values",level:2}];function h(e){const t={a:"a",br:"br",code:"code",h2:"h2",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(t.p,{children:["The Auth loop perform authorisation checks against the current user. This loop returns nothing if the authorization fails, or the loop contents if it succeeds.",(0,i.jsx)(t.br,{}),"\n","You may check in the front office if an administrator is logged in, and perform specific functions in your front-office template (such as direct editing, for example).",(0,i.jsx)(t.br,{}),"\n",(0,i.jsx)(t.code,{children:'{loop type="auth" name="the-loop-name" [argument="value"], [...]}'})]}),"\n",(0,i.jsx)(t.h2,{id:"auth-arguments",children:"Arguments"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Argument"}),(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Description"}),(0,i.jsx)(t.th,{style:{textAlign:"center"},children:"Default"}),(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Example"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"access"}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["A comma separated list of access, . If empty or missing, the authorization is checked against the roles only ",(0,i.jsx)("br",{})," ",(0,i.jsx)(t.a,{href:"#auth-access-possible-values",children:"Expected values"})]}),(0,i.jsx)(t.td,{style:{textAlign:"center"}}),(0,i.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"module"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"A comma separated list of modules"}),(0,i.jsx)(t.td,{style:{textAlign:"center"}}),(0,i.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"resource"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"A comma separated list of resources"}),(0,i.jsx)(t.td,{style:{textAlign:"center"}}),(0,i.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"role *"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"A comma separated list of user roles"}),(0,i.jsx)(t.td,{style:{textAlign:"center"}}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:'role="ADMIN" or can be role="CUSTOMER"'})]})]})]}),"\n",(0,i.jsxs)(t.p,{children:["Plus the ",(0,i.jsx)(t.a,{href:"./global_arguments",children:"global arguments"})]}),"\n",(0,i.jsx)(t.h2,{id:"examples",children:"Examples"}),"\n",(0,i.jsx)(t.p,{children:"I want to check if current administrator is allowed tu use the back-office search function."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-smarty",children:'{loop type="auth" name="can_create" role="ADMIN" resource="admin.administrator" access="CREATE"}\n    <a title="{intl l=\'Create a new administrator\'}" href="#administrator_create_dialog" data-toggle="modal">\n        <span class="glyphicon glyphicon-plus"></span>\n    </a>\n{/loop}\n'})}),"\n",(0,i.jsx)(t.p,{children:'The role is ADMIN, which mean that the current user should have the "ADMIN" role. The permission is "admin.administrator", which is the identifier of the administrator permission. According to the access attribute, the current user should have the CREATE permission.\nI want to check if the customer is logged in, or not.'}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-smarty",children:'{loop type="auth" name="customer_info_block" role="CUSTOMER"}\n    <p>Your are logged in. <a href="{viewurl view=\'index\' action=\'logoutCustomer\'}">Logout</a></p>\n{/loop}\n\n{elseloop rel="customer_info_block"}\n    You are not logged in. <a href="{viewurl view=\'login\'}">Login now</a> or <a href="{viewurl view=\'create_account\'}">create your account</a>\n{/elseloop}\n'})}),"\n",(0,i.jsx)(t.h2,{id:"auth-access-possible-values",children:"Access possible values"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.a,{href:"#auth-arguments",children:"Arguments"})}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsx)(t.tr,{children:(0,i.jsx)(t.th,{children:"value"})})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsx)(t.tr,{children:(0,i.jsx)(t.td,{children:"CREATE"})}),(0,i.jsx)(t.tr,{children:(0,i.jsx)(t.td,{children:"DELETE"})}),(0,i.jsx)(t.tr,{children:(0,i.jsx)(t.td,{children:"UPDATE"})}),(0,i.jsx)(t.tr,{children:(0,i.jsx)(t.td,{children:"VIEW"})})]})]})]})}function d(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}}}]);